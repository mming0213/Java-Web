<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script>
//노드 아래의 모든 텍스트 얻기
//Text노드를 이어 붙이고 문자열로 반환
function getText(n){
	//모든 텍스트 노드의 값을 배열에 저장하고 배열의 각 원소를 한번에 이어 문자열로 반환
				var strings = [0,1,2,3,4,5];
				getStrings(n, strings);
				return strings.join(" ");
		
		//모든 텍스트 노드를 찾고, 노드의 텍스트를 배열에 추가(재귀함수)
		 function getStrings(n, strings) {

		        if (n.nodeType == 3 ) /* Node.TEXT_NODE */
		        {
		            strings.push(n.data);        
		        } 
		        else if (n.nodeType == 1) /* Node.ELEMENT_NODE */ 
		        {    

		            //firstChild와 lastChild는 노드의 첫번째와 마지막 자식을 참조
		            //nextSibling과 previousSibling은 노드의 인접한 형제 노드를 참조
		            for(var m = n.firstChild; m != null; m = m.nextSibling) {
		                getStrings(m, strings);
		            }
		        }
		    }
		}

	alert(getText(3));
/*
var strAllText = getText(document.getElementById("purchases"));
alert(strAllText);
*/
</script>
<title>노드 아래의 모든 텍스트 얻기</title>
</head>
<body>
	<h1>쇼핑 목록</h1>
	<p title="a gentle reminder">물건을 선택해 주세요</p>
	<ul id="purchases">
		<li>땅콩</li>
		<li>치즈</li>
	</ul>
	
</body>
</html>